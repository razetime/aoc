#!/usr/bin/env cbqn

âŸ¨Split, SRâŸ© â† â€¢Import "lib.bqn"

inp â† ({â€¢BQN'âŸ©'âˆ¾Ëœ'âŸ¨'âˆ¾ğ•©}Â¨1âŠ¸â†“)Â¨(<"")Splitâ€¢FLines "19.txt"

ng â† {â¥Šaâˆ¾âŒœğ•©}âŸ2 aâ†1â€¿Â¯1
Rts â† {â¥ŠngÃ—âŒœ<Ë˜ğ•©âŠËœ>âŸ¨âŸ¨0, 1, 2âŸ©, âŸ¨0, 2, 1âŸ©, âŸ¨1, 0, 2âŸ©, âŸ¨1, 2, 0âŸ©, âŸ¨2, 0, 1âŸ©, âŸ¨2, 1, 0âŸ©âŸ©}
final â† âŠ‘inp
th â† â‹ˆfinal
ogns â† âŸ¨âŸ¨0,0,0âŸ©âŸ©

{
  ğ•Š x:
  diff â† âŸ¨âŸ©
  rs â† <Ë˜â‰>RtsÂ¨âŠ‘ğ•©
  fil â† âˆ¨Â´Â¨âŠ¸/ {
    ğ•Š pts:
    {
      aâ†â¥Špts-âŒœğ•© 
      11=+Â´fâ†Â¬âˆŠa? diffâ‰¡âŸ¨âŸ© ? diff â†© (âŠ‘/f)âŠ‘a, 1;0
    }Â¨rs
  }Â¨th
  0â‰ â‰ fil ?
  fil â†© âŠ‘fil
  ogns âˆ¾â†© â‹ˆdiff
  th âˆ¾â†© â‹ˆ((âŠ‘/fil)âŠ‘rs)+<diff
  final â·âˆ˜âˆ¾â†© Â¯1âŠ‘th  
  1â†“x;
  1âŒ½ğ•©
} â€¢_while_ (0â‰ â‰ ) 1â†“inp

# Part 1:
â€¢Show â‰ final

# Part 2:
â€¢Show âŒˆÂ´â¥Š(+Â´|âˆ˜-)âŒœËœ ogns