#!/usr/bin/env cbqn

âŸ¨SplitâŸ© â† â€¢Import "lib.bqn"

ixâ€¿iy â† 2â†“' 'SplitâŠ‘â€¢FLines "17.txt"
x1â€¿x2 â† â€¢BQNÂ¨0â€¿2âŠ'.'Split 2â†“Â¯1â†“ix
y1â€¿y2 â† â€¢BQNÂ¨0â€¿2âŠ'.'Split 2â†“iy
ly â† y1âŒŠy2

# Part 1:
Inside â† {ğ•Š xâ€¿y: (x1â‰¤x)âˆ§(xâ‰¤x2)âˆ§(y1â‰¤y)âˆ§yâ‰¤y2}

trajs â† {
  traj â† âŸ¨âŸ©
  {
    ğ•Š pâ€¿d:
    traj âˆ¾â†© 1â†‘r â† âŸ¨p+d, 0â€¿Â¯1+-âŸœÃ—âŒ¾âŠ‘dâŸ©
    r    
  } â€¢_while_ {ğ•Š âŸ¨xâ€¿y, dxâ€¿dyâŸ©: yâ‰¥ly} âŸ¨0â€¿0, ğ•©âŸ©
  traj
}Â¨â·â¥Š(â†•2Ã—x1âŒˆx2)âˆ¾âŒœâˆ¾âŸœ-â†•|2Ã—y1 âŒˆâ—‹| y2
â€¢Show 1âŠ‘âŒˆÂ´âˆ¾(mask â† (âˆ¨Â´InsideÂ¨)Â¨trajs)/trajs

# Part 2:
â€¢Show +Â´mask